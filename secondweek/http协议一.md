## 浏览器处理http的流程
1. 输入网址
2. 解析域名
3. 浏览器发送http请求
4. 服务器处理请求
5. 服务器返回HTML响应
6. 浏览器处理HTML页面
7. 继续请求其他资源

## 什么是HTTP协议
    HTTP是超文本传输协议，从www服务器传输到本地浏览器的一种传输协议，网站是基于HTTP协议的，例如网站的图片、css、js等都是基于http协议进行传输的。
    HTTP协议是由从客户机到服务器的请求和从服务器到客户机的响应进行约束和规范。
    HTTP默认端口是80，HTTPS默认端口是443

## 了解TCP/IP协议栈
1. 应用层

    为用户提供所需要的各种服务，例如 HTTP、FTP、DNS、SMTP等

2. 传输层
    
    为应用层实体提供端到端的通信功能，保证数据包的顺序传送和数据的完整性。
    
    该层定义了两个主要的协议：传输控制协议（TCP） 和用户数据报协议（UDP）。
    
3. 网络层
    
    主要解决主机到主机的通信问题。IP协议是网络互联层最重要的协议。
    
4. 网络接口层
    
    负责监视数据在主机和网络之间的交换。
    
## HTTP的工作过程
一次HTTP操作称为一个事务，其工作过程可分四步：
   
1. 首先客户机与服务器需要建立连接。 
2. 建立连接后，客户机发送一个请求给服务器，请求方式的格式为：统一资源标识符（URL）、协议版本号，后面是MIME信息包括请求修饰符、客户机信息和可能的内容。
3. 服务器接收到请求后，给予相应的响应信息。其格式为一个状态行，包括信息的协议版本号、一个成功或错误的代码，后面是MIME信息包括服务器信息、实体信息和可能的内容。
4. 客户机接收到服务器返回的信息，通过浏览器显示到用户的显示屏上，然后客户机与服务器断开连接。
如果在以上过程中的某一步出现错误，那么产生的错误信息将返回到客户端，由显示屏输出。

## 请求与响应
+ HTTP请求组成：请求行、消息报头、请求正文。
+ HTTP响应组成：状态行、消息报头、响应正文。
+ 请求行组成：以一个方法符号开头，后面跟着请求的URI和协议的版本。
+ 状态行组成：服务器HTTP协议的版本，服务器发回的响应状态代码和状态代码的文本描述。

## 请求方法
+ GET 请求获取request-uri 所标识的资源
+ POST 在request-uri所标识的资源后附加新的数据
+ PUT 请求服务器存储一个资源，并用request-uri作为其标识
+ DELETE 请求服务器删除request-uri所标识的资源
+ HEAD 请求获取由request-uri所标识的资源的响应消息报头
+ OPTIONS 请求查询服务器的性能或查询和资源相关的选项和需求
+ TRACE 请求服务器送回所接收的请求消息，主要用于服务器端的测试或诊断

## HTTP状态码
状态码有三位数字组成，第一个数字定义了响应的类别：
+ 1xx: 指示信息，表示请求已接收，继续处理
+ 2xx: 成功，表示请求已被成功接收理解
+ 3xx: 重定向，要完成请求需进行更进一步的操作
+ 4xx: 客户端错误，请求有语法错误或无法实现
+ 5xx: 服务器端错误，服务器无法实现合法的请求

## 常用的请求报头
+ Accept 请求报头域用于指定客户端接受哪些类型的信息。例如：Accept: image/gif、Accept: text/html、Accept: application/json
+ Accept-Charset 请求报头域用于指定客户端接受的字符集。
+ Accept-Encoding 用于指定可接受的内容编码 例如：Accept-Encoding: gzip,deflate
+ Accept-language 用于制定一种自然语言 例如：Accept-language: zh-CN;zh;
+ Authorization 用于证明客户端有权查看某个资源。当浏览器访问一个页面时，如果收到服务器的响应代码是401（未授权），可以发送一个包含Authorization 报头的请求，要求服务器对其进行验证。
+ Host 用于指定请求资源的Internet主机和端口号，通常是从HTTP URL 中提取出来的，发送请求时，该报头域是必须的。
+ User-Agent 允许客户端将它的操作系统、浏览器和其他属性告诉服务器。

## 常用的响应报头
- location 用于重定向接受者到一个新的位置。Location响应报头域常用在更换域名的时候。
- Server 包含了服务器用来处理请求的软件信息。

## 实体报头
    请求和响应消息都可以传送一个实体。一个实体由实体报头和实体正文组成，但并不是说实体报头域和实体正文要在一起发送。实体报头定义了关于实体正文所标识的资源的元信息。

* Content-Encoding 被用作媒体类型的修饰符，它的值指示了已经被应用到实体正文的附加内容的编码，因而要获得Content-Type报头域中所引用的媒体类型，必须采用相应的解码机制
* Content-Language 描述了资源所用的自然语言
* Content-Length 用于指明实体正文的长度，以字节方式存储的十进制数字来表示。
* Content-Type 用于指明发送给接收者的实体正文的媒体类型
* Last-Modified 指示资源的最后修改日期和时间。
* Expires 给出响应过期的日期和时间。

## cookies 与 session
Cookies 是保存在客户端的小段文本，随客户端每一次请求发送该url下的所有cookies到服务器端。

Session则保存在服务器端，通过唯一的值sessionID来区别每一个用户。SessionID一般保存在cookies中随每次请求发送到服务器，服务器根据sessionID来识别客户端，再通过session 的key获取session值。

## HTTP缓存机制
    缓存会根据请求保存输出内容的副本，例如html页面，图片，文件，当下一个请求到来的时候如果是相同的URL，缓存直接使用副本响应访问请求，而不是向服务器再次发送请求。

缓存的优点：
1. 减少相应延迟
2. 减少网络带宽消耗
## 两种缓存策略
强制缓存，响应报头中Cache-Control 和 Expires (expires 修改本地时间可能造成缓存失效)表示强缓存，Cache-Control 的级别比Expires高。服务器通过这两个报头通知浏览器一个缓存时间，在缓存时间内，下次请求用缓存。不在时间内，执行比较缓存策略。

比较缓存，有Etag/If-None-Match 和Last-Modified/If-Modified-since两种策略。将缓存信息中的Etag 和Last-Modified 发送给服务器端，由服务器端校验，返回304状态码时，浏览器直接用缓存。
Etag 和 Last-Modified比较
1. 精度上，etag 优于last-modified
2. 性能上，last-modified 优于etag
3. 优先级上，etag 高于last-modified
    




    